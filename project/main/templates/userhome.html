{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home</title>
    <script src="https://kit.fontawesome.com/a59b9b09ab.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="{% static 'css/home.css' %}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light fixed-top">
        <div class="container">
          <a class="navbar-brand" href="{% url 'userhome' %}"><i class="bi bi-slack"></i>
            <span >COU</span>RSES
          </a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarTogglerDemo02" aria-controls="navbarTogglerDemo02" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarTogglerDemo02">
            <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
              <li class="nav-item">
                <a class="nav-link" href="{% url 'userhome' %}">Home</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#about">About us</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#services">Services</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#Courses">Courses</a>
              </li>
               <li class="nav-item">
                  {% if user.is_authenticated %}
                     <style>
                        /* Dropdown menu */
                        .dropdown-menu {
                            display: none; /* Hidden by default */
                            position: absolute;
                            background-color: white;
                            min-width: 160px;
                            border: 1px solid #ccc;
                            border-radius: 4px;
                            z-index: 1;
                        }

                        /* Dropdown items */
                        .dropdown-item {
                            padding: 10px;
                            color: black;
                            text-decoration: none;
                            display: block;
                        }

                        /* Hover effect for dropdown items */
                        .dropdown-item:hover {
                            background-color: #f1f1f1;
                        }


                        .cover {
                            position: relative;
                            padding: 0px 30px;
                            width: 80%;
                            margin: 100px auto;
                        }

                        .left {
                            position: absolute;
                            left: 0;
                            top: 50%;
                            transform: translateY(-50%);
                        }

                        .right {
                            position: absolute;
                            right: 0;
                            top: 50%;
                            transform: translateY(-50%);
                        }

                        .scroll-images {
                            position: relative;
                            width: 100%;
                            padding: 40px 0px;
                            height: auto;
                            display: flex;
                            flex-wrap: nowrap;
                            overflow-x: hidden;
                            overflow-y: hidden;
                            scroll-behavior: smooth;
                            -webkit-overflow-scrolling: touch;
                        }

                        .child {
                            display: flex;
                            justify-content: center;
                            align-items: center;
                            min-width: 250px;
                            height: 200px;
                            padding: 0px 15px;
                            margin: 1px 10px;
                            border: 1px solid #f1f1f1;
                            overflow: hidden;
                            -webkit-box-shadow: 0px 0px 15px 2px rgb(0 0 0 / 10%);;
                            box-shadow: 0px 0px 15px 2px rgb(0 0 0 / 10%);;
                        }

                        .child img, .child > svg {
                            position: absolute;
                            margin-top: -195px;
                            width: 80px;
                            height: 80px;
                            object-fit: cover;
                            object-position: center;
                            border-radius: 50%;
                            background: #03A9F4;
                        }

                        .scroll-images::-webkit-scrollbar {
                            width: 5px;
                            height: 8px;
                            background-color: #aaa;
                        }

                        .scroll-images::-webkit-scrollbar-thumb {
                            background-color: black;
                        }

                        button {
                            background-color: transparent;
                            border: none;
                            outline: none;
                            cursor: pointer;
                            font-size: 25px;
                        }


                    </style>

              
                    <a class="nav-link"> <button class="profile-button" onclick="toggleDropdown()" >{{ user.username }}</button></a>
                    <div class="dropdown-menu" id="dropdownMenu">
                        {% if manger %}
                            <a class="dropdown-item" href="{% url 'index' %}">Manager</a>
                        {% endif %}
                        <a class="dropdown-item" href="{% url 'logout' %}">Logout</a>
                    </div>
                </div>

                <script>
                    function toggleDropdown() {
                        const dropdownMenu = document.getElementById("dropdownMenu");
                        dropdownMenu.style.display = dropdownMenu.style.display === "block" ? "none" : "block";
                    }

                    // Close the dropdown if the user clicks outside of it
                    window.onclick = function(event) {
                        if (!event.target.matches('.profile-button')) {
                            const dropdowns = document.getElementsByClassName("dropdown-menu");
                            for (let i = 0; i < dropdowns.length; i++) {
                                const openDropdown = dropdowns[i];
                                if (openDropdown.style.display === "block") {
                                    openDropdown.style.display = "none";
                                }
                            }
                        }
                    }
                </script>
                  {% else %}
                      <a class="nav-link" href="{% url 'login' %}"><button type="button">Login</button></a>
                  {% endif %}
              </li> 
            </ul>
          </div>
        </div>
      </nav>
      <!-- ********************************************** -->
      <div id="carouselExampleCaptions" class=" carousel slide" data-bs-ride="carousel">
        <div class="carousel-inner ">
          <div class="carousel-item active text-start">
            {% load static %}
            <img src="{% static 'images/slide-1.jpg' %}" class="d-block w-100" alt="...">
            <div class="carousel-caption d-flex flex-column justify-content-center align-items-start text-start" style="top: 50%; transform: translateY(-50%);">
              <h5>Welcome To OTS Company</h5>
              <span class="fs-5">We are dedicated to enhancing employee development through our comprehensive course display platform. Our goal is to empower your workforce with the skills they need to excel in their roles. Explore our diverse range of training programs designed to foster growth, collaboration, and continuous learning within your organization.</span>
                 <!--
                 <span><a href="#" class="btn btn-primary mt-3 btn-lg">more details</a></span>
                 -->
            </div>
          </div>
          <div class="carousel-item">
            <img src="{% static 'images/slide-2.jpg' %}" class="d-block w-100" alt="...">
            <div class="carousel-caption d-flex flex-column justify-content-center align-items-center text-center" style="top: 50%; transform: translateY(-50%);">
              <h5>Enhance Learning and Development</h5>
              <p class="fs-5">Our platform simplifies employee training with easy access to organized courses. Companies can track progress, tailor training, and foster a culture of continuous learning, enhancing skills and driving success.
              </p>
                <!--
                <p><a href="#" class="btn btn-primary mt-3 btn-lg">more details</a></p>
                -->
                       </div>
          </div>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Next</span>
        </button>
      </div><br><br><br><br>
      <!-- **************************************** -->
      <section id="about" class="container">
        <div class="card mb-3 border-0" style="width: 100%; ">
            <div class="row g-0">
              <div class="col-md-6 ">
                <div class="card-body"  style="margin: 15px; text-align: right;">
                     <h5 class="card-title fw-bold fs-1 text-start" >About Us</h5>
                    <div class="card-text text-start">
                      <p>Welcome to OTS Company, an innovative platform dedicated to enhancing employee development through accessible online courses. We understand that continuous learning is vital for personal and professional growth, which is why we provide a centralized hub for companies to post and showcase their training programs. Our mission is to empower employees by offering a diverse range of courses that foster skill enhancement, collaboration, and career advancement. Join us in creating a culture of learning that drives success and excellence within your organization!</p>
                    </div>
                    
                </div>
              </div>
              <div class="col-md-6 border-0 ">
                     <img src="../static/images/shape1.png" class="img-fluid rounded-start" alt="..." width="100%">
              </div>
        </div>
      </section>
        <!-- ****************************** -->
        <section id="services" class="services section-padding bg">
          <div class="container">
              <p class="fs-1 fw-bold text-center">Services</p>
      <div class="row row-cols-1 row-cols-md-3 g-4">
          <div class="col ">
            <div class="card h-100 border-0">
              <div class="d-flex" > <img src="../static/images/books.png" class="img-fluid">
                  <h5 class="card-title fs-3 fw-bold">Custom Course Creation</h5>
              </div>
              <div class="card-body">
                  <p class="card-text fs-5">Easily create and upload tailored courses to meet your organization's training needs, ensuring employees receive relevant and engaging content.</p>
              </div>
            </div>
          </div>
          <div class="col ">
              <div class="card h-100 border-0">
                <div class="d-flex"><img src="../static/images/240_F_791060134_DcYu9eD5ycLs2Xz1PNLtqOPeYImhkMp2.jpg" class="img-fluid" >
                    <h5 class="card-title fs-3 fw-bold">Employee Progress Tracking</h5>
                    </div>
                  <div class="card-body">
                    <p class="card-text fs-5">Monitor employee engagement and track progress with detailed reports and analytics to enhance training effectiveness and identify development opportunities.</p>
                </div>
              </div>
            </div>
          <div class="col ">
            <div class="card h-100 border-0">
              <div class="d-flex"><img src="../static/images/240_F_474563693_PyUptqVKoRoJhzGakDjDOHRgiFhLiiSd.jpg" alt="">
                 <h5 class="card-title fs-3 fw-bold">Seamless Integration and Support</h5>
              </div>
              <div class="card-body">
                  <p class="card-text fs-5">Enjoy smooth integration with your existing systems and access dedicated support to ensure a hassle-free experience for both administrators and employees.</p>
              </div>
            </div>
          </div>
        </div>
          </div>
      </section>
    <!-- ************************************ -->
  <!-- ************************************** -->
  <div id="text2" class="text-center my-5 container">
    <div class="row justify-content-center">
        <div class="col-md-6 col-sm-8 col-10">
            <h1>ONLINE <span>COURSES</span> SEARCH</h1><br>
            <h6>Get more online courses, 4 reasons why youâ€™ll love education</h6><br>
            <form class="d-flex" method="GET" action="{% url 'course_search' %}">
                <input type="text" name="course_name" class="form-control me-2" placeholder="Your Course Name" required>
                <button type="submit" class="btn btn-primary">SEARCH COURSES</button>
            </form><br><br>
        </div>
    </div>
</div>
{% if user.is_authenticated %}
<section id="Courses" class="services_team section-padding bg position-relative">
  <p class="fs-1 fw-bold text-center">Courses</p>

  <div class="position-relative">
    <button class="left btn btn-primary position-absolute" onclick="leftScroll()" style="left: 20px; top: 50%; transform: translateY(-50%); z-index: 10;">
      <i class="fas fa-angle-double-left"></i>
    </button>
    <div class="scroll-images row row-cols-1 row-cols-md-3 g-4 mx-2" style="overflow-x: auto; scrollbar-width: none; -ms-overflow-style: none;">
      {% for usercourse in usercourses %}
        <div class="col">
          <div class="card h-100 border-0 shadow-sm" style="transition: transform 0.3s ease; cursor: pointer;" onmouseover="this.style.transform='scale(1.05)';" onmouseout="this.style.transform='scale(1)';">
            <div class="card-img-wrapper" style="width: 100%; height: 70%; overflow: hidden;">
              <img id="img_team" src="{{ usercourse.course_image }}" 
                   class="card-img-top" 
                   alt="{{ usercourse.course_title }} image"
                   style="width: 100%; height: 100%; object-fit: cover;">
            </div>

            <!-- Course Title and Link -->
            <div class="card-body text-center">
              <h5 class="card-title fs-3 fw-bold">{{ usercourse.course_title }}</h5>
              <a href="{% url 'course_detail' usercourse.id %}" class="btn btn-outline-primary rounded-circle">
                Show
              </a>
            </div>
          </div>
        </div>
      {% endfor %}
    </div>

    <!-- Right Scroll Button - Position within the Courses section -->
    <button class="right btn btn-primary position-absolute" onclick="rightScroll()" style="right: 20px; top: 50%; transform: translateY(-50%); z-index: 10;">
      <i class="fas fa-angle-double-right"></i>
    </button>
  </div>
</section>

<style>
  .scroll-images::-webkit-scrollbar {
    display: none;
  }
  .scroll-images {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
</style>
{% endif %}

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const scrollImages = document.querySelector(".scroll-images");
    const leftButton = document.querySelector(".left");
    const rightButton = document.querySelector(".right");

    // Function to check if buttons should be enabled or disabled
    function checkScroll() {
      const currentScroll = scrollImages.scrollLeft;
      const scrollLength = scrollImages.scrollWidth - scrollImages.clientWidth;
      if (currentScroll === 0) {
        leftButton.setAttribute("disabled", "true");
        rightButton.removeAttribute("disabled");
      } else if (currentScroll >= scrollLength) {
        rightButton.setAttribute("disabled", "true");
        leftButton.removeAttribute("disabled");
      } else {
        leftButton.removeAttribute("disabled");
        rightButton.removeAttribute("disabled");
      }
    }

    // Calculate the width of three cards to scroll by that amount
    function getCardWidth() {
      const card = scrollImages.querySelector('.col'); // Select a single card
      return card ? card.offsetWidth : 200; // Fallback to 200px if no cards are available
    }

    // Scroll left by three cards
    function leftScroll() {
      scrollImages.scrollBy({
        left: -1 * getCardWidth(), // Scroll by one cards width
        behavior: "smooth"
      });
    }

    // Scroll right by three cards
    function rightScroll() {
      scrollImages.scrollBy({
        left: 1 * getCardWidth(), // Scroll by one cards width
        behavior: "smooth"
      });
    }

    // Attach scroll event and resize event listeners
    scrollImages.addEventListener("scroll", checkScroll);
    window.addEventListener("resize", checkScroll);
    checkScroll();

    // Attach click events to buttons
    leftButton.addEventListener("click", leftScroll);
    rightButton.addEventListener("click", rightScroll);
  });
</script>

  <!-- ************************** -->

  <footer class="bg-light text-dark py-5">
    <div class="container">
        <div class="row">
            <div class="col-md-3 mb-4">
                <h5 fs-1 fw-bold >Our Links</h5>
                <p fs-3>Follow us from those links</p>
                <div id="icon_text">
                    <a href="https://www.facebook.com/" target="_blank" rel="noopener noreferrer">
                        <i class="bi bi-facebook text-dark"></i>
                    </a>
                    <a href="https://www.linkedin.com/" target="_blank" rel="noopener noreferrer">
                        <i class="bi bi-linkedin text-dark"></i>
                    </a>
                </div>
            </div>
                <div class="col-md-3 mb-4">
                <h5>Useful Links</h5>
                <ul class="list-unstyled">
                    <li><a id="mmmm" href="{% url 'userhome' %}" class="text-dark">Home</a></li>
                </ul>
            </div>
            <div class="col-md-3 mb-4">
              <h5>Contact Us</h5>
              <i class="bi bi-envelope-fill"></i>
              <a href="https://mail.google.com/mail/?view=cm&fs=1&to=ramy41599@gmail.com" target="_blank" style="text-decoration: none; color: inherit;">
                  <span>ramy41599@gmail.com</span>
              </a>
          </div>
          
          
        </div>
    </div>
  </footer>

     <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>

     <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
     <script>
$('.navbar-nav .nav-link').click(function () {
    $('.navbar-nav .nav-link').removeClass('active'); 
    $(this).addClass('active'); 

    $('.navbar-collapse').collapse('hide');
});

$(document).click(function (event) {
    var clickOver = $(event.target);
    var isNavbarOpen = $(".navbar-collapse").hasClass("show");

    if (isNavbarOpen && !clickOver.closest('.navbar').length) {
        $(".navbar-collapse").collapse('hide');
    }
});


$(window).on('scroll', function () {
    var position = $(this).scrollTop(); 
    $('section').each(function () {
        var target = $(this).offset().top - 100;
        var id = $(this).attr('id');
        if (position >= target) {
            $('.navbar-nav .nav-link').removeClass('active');
            $('.navbar-nav .nav-link[href="#' + id + '"]').addClass('active');
        }
    });
});

     </script>
</body>
</html>